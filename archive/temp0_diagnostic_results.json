{
  "timestamp": "2025-12-07T11:40:31.885733",
  "purpose": "Determine if regressions are architectural or LLM variance",
  "changes": [
    "Removed 'Query:' prefix",
    "LLM Lingua compresses entire prompt",
    "Temperature=0 (this test only)"
  ],
  "summary": {
    "total_queries": 10,
    "cache_hits": 4,
    "regressions": 2,
    "improvements": 4
  },
  "conclusion": "Architecture issue",
  "regressions": [
    {
      "query": "What is the refund policy?",
      "total_diff": 9,
      "input_diff": 0,
      "output_diff": 9,
      "strategy": "cheap"
    },
    {
      "query": "How do I contact support?",
      "total_diff": 16,
      "input_diff": 0,
      "output_diff": 16,
      "strategy": "cheap"
    }
  ],
  "improvements": [
    {
      "query": "How do I cancel my subscription?",
      "total_diff": 0,
      "input_diff": 0,
      "output_diff": 0,
      "strategy": "cheap"
    },
    {
      "query": "What payment methods do you accept?",
      "total_diff": -9,
      "input_diff": 0,
      "output_diff": -9,
      "strategy": "cheap"
    },
    {
      "query": "Why is my account locked?",
      "total_diff": 0,
      "input_diff": 0,
      "output_diff": 0,
      "strategy": "cheap"
    },
    {
      "query": "I'm having trouble with billing when I try to update my payment method",
      "total_diff": -15,
      "input_diff": 0,
      "output_diff": -15,
      "strategy": "cheap"
    }
  ],
  "results": [
    {
      "query": "What is the refund policy?",
      "baseline_input": 13,
      "baseline_output": 279,
      "baseline_total": 292,
      "baseline_latency": 4883.766174316406,
      "optimized_input": 13,
      "optimized_output": 288,
      "optimized_total": 301,
      "optimized_latency": 6418.185710906982,
      "cache_hit": false,
      "cache_type": null,
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 9,
      "total_diff": 9,
      "regression": true
    },
    {
      "query": "How do I cancel my subscription?",
      "baseline_input": 14,
      "baseline_output": 196,
      "baseline_total": 210,
      "baseline_latency": 3879.1377544403076,
      "optimized_input": 14,
      "optimized_output": 196,
      "optimized_total": 210,
      "optimized_latency": 3585.822105407715,
      "cache_hit": false,
      "cache_type": null,
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 0,
      "total_diff": 0,
      "regression": false
    },
    {
      "query": "What payment methods do you accept?",
      "baseline_input": 14,
      "baseline_output": 66,
      "baseline_total": 80,
      "baseline_latency": 2262.938976287842,
      "optimized_input": 14,
      "optimized_output": 57,
      "optimized_total": 71,
      "optimized_latency": 2254.286766052246,
      "cache_hit": false,
      "cache_type": null,
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": -9,
      "total_diff": -9,
      "regression": false
    },
    {
      "query": "How do I contact support?",
      "baseline_input": 13,
      "baseline_output": 206,
      "baseline_total": 219,
      "baseline_latency": 5047.286748886108,
      "optimized_input": 13,
      "optimized_output": 222,
      "optimized_total": 235,
      "optimized_latency": 4235.234260559082,
      "cache_hit": false,
      "cache_type": null,
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 16,
      "total_diff": 16,
      "regression": true
    },
    {
      "query": "Why is my account locked?",
      "baseline_input": 13,
      "baseline_output": 215,
      "baseline_total": 228,
      "baseline_latency": 5232.913255691528,
      "optimized_input": 13,
      "optimized_output": 215,
      "optimized_total": 228,
      "optimized_latency": 3534.60955619812,
      "cache_hit": false,
      "cache_type": null,
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 0,
      "total_diff": 0,
      "regression": false
    },
    {
      "query": "Can you explain the refund policy?",
      "baseline_input": 0,
      "baseline_output": 0,
      "baseline_total": 0,
      "baseline_latency": 0,
      "optimized_input": 0,
      "optimized_output": 0,
      "optimized_total": 0,
      "optimized_latency": 0,
      "cache_hit": true,
      "cache_type": "semantic_direct",
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 0,
      "total_diff": 0,
      "regression": false
    },
    {
      "query": "How can I cancel my subscription?",
      "baseline_input": 0,
      "baseline_output": 0,
      "baseline_total": 0,
      "baseline_latency": 0,
      "optimized_input": 0,
      "optimized_output": 0,
      "optimized_total": 0,
      "optimized_latency": 0,
      "cache_hit": true,
      "cache_type": "semantic_direct",
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 0,
      "total_diff": 0,
      "regression": false
    },
    {
      "query": "What is the refund policy?",
      "baseline_input": 0,
      "baseline_output": 0,
      "baseline_total": 0,
      "baseline_latency": 0,
      "optimized_input": 0,
      "optimized_output": 0,
      "optimized_total": 0,
      "optimized_latency": 0,
      "cache_hit": true,
      "cache_type": "semantic_direct",
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 0,
      "total_diff": 0,
      "regression": false
    },
    {
      "query": "How do I contact support?",
      "baseline_input": 0,
      "baseline_output": 0,
      "baseline_total": 0,
      "baseline_latency": 0,
      "optimized_input": 0,
      "optimized_output": 0,
      "optimized_total": 0,
      "optimized_latency": 0,
      "cache_hit": true,
      "cache_type": "exact",
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": 0,
      "total_diff": 0,
      "regression": false
    },
    {
      "query": "I'm having trouble with billing when I try to update my payment method",
      "baseline_input": 20,
      "baseline_output": 288,
      "baseline_total": 308,
      "baseline_latency": 5014.760255813599,
      "optimized_input": 20,
      "optimized_output": 273,
      "optimized_total": 293,
      "optimized_latency": 4994.074583053589,
      "cache_hit": false,
      "cache_type": null,
      "strategy": "cheap",
      "input_diff": 0,
      "output_diff": -15,
      "total_diff": -15,
      "regression": false
    }
  ]
}